# Milestone 4: Hits Manager
**Timeline:** Jan 8, 2025 | **Status:** not started

## Goal
Borrow and deploy the hits manager from ws (webseriously) to di. Then test it by adding a help button in the bottom right corner that opens a browser to https://docs.designintuition.app

## What Emerged
(add this when complete)

## Our Work

### Review ws implementation
- [ ] `src/lib/ts/managers/Hits.ts` — main manager (RBush spatial index, click handling)
- [ ] `src/lib/ts/state/S_Hit_Target.ts` — hit target class
- [ ] `src/lib/ts/signals/Mouse_Timer.ts` — timer for long-click, double-click, autorepeat

### Identify what di already has
- [x] `S_Mouse` — identical to ws ✓
- [x] `T_Hit_Target` enum ✓
- [x] `T_Mouse_Detection` enum ✓
- [x] `T_Drag` enum ✓
- [x] `Constants.threshold` (autorepeat, double_click, long_click) ✓
- [x] `Point`, `Rect` types ✓

### Dependencies to add
- [x] Install `rbush` package (`yarn add rbush @types/rbush`)
- [x] Create `src/lib/ts/signals/Mouse_Timer.ts`
- [x] Create `src/lib/ts/state/S_Hit_Target.ts` (simplified for di)
- [x] Create `src/lib/ts/managers/Hits.ts` (simplified for di)
- [x] Add `asBBox` to Point and Rect in Coordinates.ts

### Simplifications for di
- [x] Remove ws-specific: radial, controls, ancestry, colors references
- [x] Remove ring/paging/widget-specific logic (not needed yet)
- [x] Keep: RBush indexing, hover detection, click/long-click/double-click handling

### Integration
- [x] Add `hits` export to common imports
- [ ] Wire up mouse events in Main.svelte or Graph.svelte
- [ ] Test hover detection
- [ ] Test click handling

### Deploy
- [x] Verify build passes
- [x] Push to trigger Netlify deploy
- [x] Test on https://designintuition.app

## Artifacts
(add links when complete)
