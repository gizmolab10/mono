# Details

- [x] command-"," to show/hide details
- [x] port: glow button idea from ws
	- [x] add a section in this file "design"
	- [x] analyze ws code for hideables, glow buttons and banners, and details
	- [ ] analyze code for D_Header, etc.
	- [ ] suggest how to use css to create a rounded border around each glow banner
	- [x] describe it in the new section
- [x] add 3 details hideables (preferences, selection, library)
- [x] stretch the glow banners the full width of details
- [x] nuzzle the banners at the top of details
- [x] create D_Preference

---

## Design

### What ws has

Three layers working together:

**1. Banner_Hideable** — a wrapper component. Takes a `T_Detail` (header, actions, selection, tags, traits, preferences, data). Renders a banner bar at the top, and a `<slot/>` underneath that shows/hides. Clicking the banner toggles the slot. State lives in `S_Banner_Hideable` (one per detail type). Visibility tracked in a `w_t_details` store (array of visible detail-type strings). Header has no banner (always visible). The `{#key trigger}` pattern forces re-renders only when combined deps change.

**2. Glow_Button** — an individual clickable button with a radial gradient "glow" background. Uses `SVG_Gradient` (radial, center-bright or edge-bright depending on `isInverted`). On hover, the gradient hides and the button goes flat. Wired into ws's hit system (`S_Element`, `handle_s_mouse`). Supports autorepeat for nav arrows. Background shrinks slightly on autorepeat press (scale 0.95 transition).

**3. Glows_Banner** — a row of Glow_Buttons filling the banner width. First button is the section title (toggles the hideable). Additional buttons are nav arrows (previous/next) computed by `G_Repeater` for layout. Thin separators between buttons and at top/bottom of the banner strip.

**How Details.svelte composes them:**

```
Details.svelte
  └─ Banner_Hideable(header)     → D_Header (no banner bar)
  └─ Banner_Hideable(preferences) → D_Preferences
  └─ Banner_Hideable(actions)    → D_Actions
  └─ Banner_Hideable(selection)  → D_Selection
  └─ Banner_Hideable(tags)       → D_Tags
  └─ Banner_Hideable(traits)     → D_Traits
  └─ Banner_Hideable(data)       → D_Data
```

Each Banner_Hideable gets a `T_Detail` enum and renders its own Glows_Banner. The slot content (D_*) only mounts when visible.

### What di needs (simplified)

ws's system is built around graph-specific data (ancestries, grabs, tags, traits). di's details are simpler: object properties, preferences, and a future library panel.

**Port plan — three pieces:**

1. **Hideable** — a generic collapsible section. Takes a title string and a boolean `visible`. Banner bar at top (click to toggle). Slot underneath shows/hides. No need for ws's `T_Detail` enum or `S_Banner_Hideable` state class — a simple Svelte 5 component with `$state` is enough.

2. **Glow banner bar** — the clickable header strip. Radial gradient background, hover kills gradient. Reuse the SVG_Gradient concept (or just a CSS radial-gradient, simpler). Wire into di's existing `hit_target` system instead of ws's S_Element.

3. **Details.svelte** refactor — wrap current content into three Hideables:
   - **selection** — name field, add-child button (current top section)
   - **preferences** — units, precision, line thickness, colors (current middle section)
   - **library** — export/import, build notes (current bottom section)

**Key simplifications vs ws:**
- No `G_Repeater` layout math — di banners are single-button (just the title)
- No nav arrows — di sections don't have next/previous items
- No `S_Items` or `w_t_details` array — just individual boolean stores per section
- CSS radial-gradient instead of SVG_Gradient component — fewer files
- Svelte 5 runes (`$state`, `$derived`) instead of ws's Svelte 4 `$:` blocks