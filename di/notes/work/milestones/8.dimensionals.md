# Milestone 8: Dimensions

**Started:** Feb 4, 2026 | **Status:** in progress

## Goal

Render 3 dimensionals. Then make them editable — changing a dimension value updates the geometry.

A directional is a decoration attached to an edge, containing: terminator arrows, dimension text, dimension lines, witness lines. 

geometry SOT (source of truth) is SO (three axes, each has size and position (relative to origin, one corner). O_Scene accesses the SOT and renders **in reaction** (note to self, verify whether we are or can). user interacts with the 2D projection displayed on the camera.

each edge is parallel to three others around the SO. an algorithm A selects one as the attached edge. each edge is belongs to two faces. another algorithm B selects which face is the right plane in which to draw the dimensional.

### Algorithm A — edge selection

silhouette edge detection. a silhouette edge has one front-facing and one back-facing adjacent face. for each axis, there are always exactly 2 silhouette edges; prefer the one whose front-facing adjacent face is most toward the viewer.

- [x] must be on the circumference -- not the edge that is in front
- [x] there will always be two such, prefer the front

### Algorithm B — witness plane

transform camera eye into object-local space, dot each candidate face's unit normal against the camera direction. `abs(dot)` so back faces count too.

- [x] on the face (of the 6) whose normal is pointing most directly at the camera
	- [x] if it is a "back" face, the normal points into the SO


---

## Work Phases

- [x] 1 draw the directionals, algorithms A and B
- [x] 2 stretch the SO -> directionals react
- [ ] 3 edit the text -> SO reacts

### Implement

- [x] dimension data structure (derived on render, no persistent state)
- [x] witness lines (3D-projected, perpendicular to measured edge)
- [x] dimension line (parallel, between witnesses, with text gap)
- [x] terminator arrows
- [x] dimension text (value centered on dimension line)
- [x] Algorithm A — silhouette edge detection
- [x] Algorithm B — witness plane via face normal · camera direction
- [ ] edit interaction (click text, type value, apply)

### Test manually

- [x] shows 3 dimensions (one per axis), always
- [x] dimensions update when geometry dragged
- [ ] edit dimension value — geometry resizes accordingly

---

## Artifacts

- `Render.ts` — `render_dimensions`, `render_axis_dimension`, `find_best_edge_for_axis`, `edge_witness_direction`, `draw_dimension_3d`

## Key Decisions

- dimensions are derived on render (no persistent data structure) — YAGNI
- Algorithm A uses silhouette edges, not front-face + distance-from-center heuristic
- Algorithm B uses face normal · camera direction in local space, not screen-space winding area
