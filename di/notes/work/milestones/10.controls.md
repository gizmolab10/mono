# Milestone 10: Controls UI

actual buttons in the toolbar — starting with scale.

## Remaining Work

- [ ] add to Stepper a horizontal layout option
- [ ] convert + and - into a horizontal Stepper
- [ ] add a slider for scaling, optional logarithmic effect (default is linear)

---

## Scaling

the object's visual size had no UI. you could drag edges and corners to change bounds, but the overall scale? stuck at 1.0 forever. needed a way to zoom in and out on the geometry itself — logarithmic so it feels even whether you're at 0.1 or 10.0.

### What was built

**Scroll wheel** on the canvas scales the object. each tick multiplies by a constant factor — that's the logarithmic part. hold Shift for fine control.

| Mode   | Up factor | Down factor |
| ------ | --------- | ----------- |
| Coarse | ×1.1      | ×0.9        |
| Fine   | ×1.02     | ×0.98       |

**Toolbar buttons** — `−` and `+` in the controls bar, same coarse factors as the wheel. simple, always visible.

**Persistence** — scale now serializes with the SO and restores on reload. old saved scenes without scale default to 1.0 (backwards compatible).

### How it works

`O_Scene.scale` was already there (uniform, applied in the world matrix via `mat4.fromRotationTranslationScale`). the work was wiring it up:

- `Events_3D` got a wheel listener and `scale_object()` method — takes a direction (+1/−1) and fine flag, computes the factor, multiplies `obj.scale`
- `Trivial.ts` wires both the wheel handler and exports `scale_up`/`scale_down` for the toolbar
- `Smart_Object.serialize()` now includes `scale` (pulled from `this.scene.scale`); `deserialize()` returns `{ so, scale }` so the caller can apply it to the O_Scene
- `Controls.svelte` imports the toolbar actions and renders the buttons with a shared `.toolbar-btn` style

### Files changed

| File | What |
| ---- | ---- |
| `src/lib/ts/signals/Events_3D.ts` | wheel listener, `set_wheel_handler`, `scale_object` |
| `src/lib/ts/render/Trivial.ts` | restore scale on load, wire wheel, export `scale_up`/`scale_down` |
| `src/lib/ts/runtime/Smart_Object.ts` | serialize/deserialize now include scale |
| `src/lib/ts/managers/Persistence.ts` | `Saved_Scene` interface updated |
| `src/lib/svelte/main/Controls.svelte` | `−`/`+` buttons, unified button style |

### Key decisions

- **Logarithmic by multiplication, not addition** — each step is ×factor, so scaling feels proportional at any size. no need for a separate log/exp wrapper.
- **Scale lives on O_Scene, not SO** — SO owns geometry (bounds, orientation). scale is a rendering/scene concern. SO serialize grabs it from `this.scene` for convenience.
- **No min/max clamp** — let the user scale as far as they want. if it gets weird, hit reset.

---
